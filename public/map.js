if(document.readyState == 'loading'){
    document.cookie = 'obj=';
}

let typeOfTender = document.querySelector('select[id=typeOfTender]');
let storeOfObj =[],
arrOfType = [
    ['Полное строительство и реконструкция зданий и сооружений',
    'Строительно-монтажные работы, Монтаж конструкций и ограждений',
    'Ремонт зданий и сооружений',
    'Фасадные работы, Кровельные работы, Высотные работы',
    'Установка окон и дверей, Производство окон и дверей',
    'Подготовка площадей под строительство, Расчистка просек, Сооружение насыпей',
    'Сантехнические работы, Внутренние сети водо-, тепло-, газо-снабжения и канализации',
    'Электротехнические работы в зданиях',
    'Строительство и обслуживание объектов энергетики и электрических сетей',
    'Строительство и обслуживание сетей связи и сооружений связи',
    'Строительство, ремонт и обслуживание дорог, мостов, тоннелей и ЖД путей',
    'Строительство и ремонт трубопроводов и прочих инженерных коммуникаций',
    'Проектирование, монтаж и обслуживание систем вентиляции',
    'Строительство и обслуживание гидротехнических сооружений',
    'Огнезащитные и антикоррозийные работы',
    'Благоустройство и озеленение',
    'Водолазные работы',
    'Буровые работы (кроме бурения нефтегазовых скважин)'],
    ['Трубопроводная и запорная арматура, радиаторы',
        'Метизы, Крепежные изделия',
        'Строительные металлические конструкции',
        'Строительные железобетонные изделия',
        'Инструменты',
        'Готовые металлические изделия, Ограждения, Изделия ковки',
        'Сантехнические изделия. Неметаллические трубы',
        'Отделочные материалы',
        'Строительные материалы',
        'Малые архитектурные формы',
        'Материалы для строительства дорог, ЖД путей',
        'Строительное оборудование',
        'Краски, Лаки, Клеи',
        'Продукция каменных карьеров, щебень, песок, глина',
        'Мобильные металлические и бетонные сооружения, Мобильные здания',
        'Вентиляционное оборудование и материалы'],
    ['Проектные работы в области строительства и ремонта зданий, внутридомовых сетей',
        'Проектные работы в области энергетики',
        'Проектные работы в нефтегазовой отрасли',
        'Проектные работы в строительстве дорог и мостов, ЖД путей, тоннелей',
        'Проектные работы в строительстве трубопроводов и инженерных коммуникаций',
        'Проектные работы в строительстве объектов связи',
        'Инженерно-геодезические изыскания, Землеустройство, Картография',
        'Инженерно-геологические и гидрологические изыскания, Разведочное бурение',
        'Инженерно-экологические изыскания',
        'Обследование несущих конструкций, Дефектоскопия, Неразрушающий контроль',
        'Технический надзор, Технические испытания, Экспертиза промышленной безопасности',
        'Поверка и калибровка оборудования и технических средств',
        'Консультирование и аттестация по охране труда, материалы по охране труда',
        'Прочие проектные работы',
        'Проектирование в строительстве гидротехнических сооружений'],
    ['Стальные изделия, Металлопрокат, Листовой прокат из стали и черных металлов',
        'Металлические трубы',
        'Металлургическая продукция из цветных металлов',
        'Сталь, Чугун, Цветные и редкоземельные металлы, Сплавы, Руда металлическая',
        'Услуги металлообработки'],
    ['Генераторы, Трансформаторы, Электродвигатели, Реакторы, Энергетические установки',
        'Кабельно-проводниковая продукция',
        'Электрическая распределительная и регулирующая аппаратура, Электроустановочные изделия, Электронные компоненты',
        'Аккумуляторы (кроме автомобильных), Батареи, Гальванические элементы, Источники бесперебойного питания',
        'Светотехническая продукция, Лампы и другое осветительное оборудование',
        'Электрокерамика, Изоляторы, Диэлектрики, прочие электроизоляционные материалы',
        'Котельное, теплообменное и теплотехническое оборудование и материалы. Монтаж и обслуживание',
        'Прочее электрооборудование и материалы',
        'Энергоаудит, Энергетическое обследование',
        'Услуги в области ядерной энергетики'],
    ['Оборудование для нефте- и газодобычи',
        'Монтаж и обслуживание оборудования для нефте- и газодобычи. Бурение нефтяных и газовых скважин',
        'Оборудование для АЗС, нефтебаз и нефтезаводов, нефтепроводов',
        'Монтаж и обслуживание оборудования АЗС, нефтебаз и нефтезаводов, нефтепроводов',
        'Оборудование для газопереработки, газопроводов и газораспределения',
        'Монтаж и обслуживание оборудования для газопереработки, газопроводов и газораспределения',
        'Научные и лабораторные исследования в области нефте- и газодобычи',
        'Прочие услуги в области нефтяной отрасли',
        'Прочие услуги в области газовой отрасли',],
    ['Промышленное Холодильное оборудование (кроме кондиционеров), монтаж и обслуживание',
        'Металло- и дерево-обрабатывающее оборудование, Станки, монтаж и обслуживание',
        'Оборудование для сварки и спайки, его обслуживание. Электроды',
        'Контрольно-измерительные приборы и автоматика, монтаж и обслуживание',
        'Прессовочно-штамповочное оборудование, монтаж и обслуживание',
        'Оборудование для угле- и золото-добычи, добывающей промышленности, монтаж и обслуживание',
        'Крановое и подъемное оборудование, монтаж и обслуживание',
        'Насосное и водонапорное оборудование, Компрессоры, монтаж и обслуживание',
        'Очистное и Фильтрующее оборудование и материалы, монтаж и обслуживание',
        'Лабораторное (кроме медицинского) и испытательное оборудование и материалы, обслуживание и монтаж',
        'Прочее оборудование промышленного назначения',
        'Монтаж и обслуживание прочего оборудования промышленного назначения',
        'Изготовление нестандартного оборудования',
        'Подшипники',
        'Резинотехнические изделия',
        'Прочие промышленные изделия',
        'Оборудование для химической промышленности, монтаж и обслуживание',
        'Полимерные, фторопластовые и другие пластиковые изделия технического назначения',
        'Промышленные резервуары и ёмкости, ремонт и обслуживание',
        'Оборудование и материалы для промышленной безопасности',
        'Оборудование для металлургической промышленности. Термическое оборудование, монтаж и обслуживание'],
    ['Технологическое оборудование, монтаж и обслуживание',
        'Кондиционеры и тепловое оборудование. Монтаж и обслуживание',
        'Торговое и складское оборудование, Оборудование для хранения',
        'Геодезическое оборудование, монтаж и обслуживание',
        'Навигационное оборудование, монтаж и обслуживание',
        'Лифтовое и эскалаторное оборудование. Монтаж и обслуживание лифтов и эскалаторов',
        'Банковское оборудование, монтаж и обслуживание',
        'Прочее оборудование общего назначения',
        'Монтаж и обслуживание прочего оборудования общего назначения'],
    ['Бензины. Дизельное топливо, Бункеровка судов',
        'Авиационное топливо',
        'Мазут, Жидкое печное топливо, Битум',
        'Нефть',
        'Автомобильные и моторные масла, смазки, технические жидкости',
        'Трансформаторные и прочие технические масла и смазки',
        'Химические присадки, добавки',
        'Уголь, Твердое печное топливо',
        'Прочее топливо, Торф, Сланцы',
        'Газ, Газовый конденсат',
        'Резина, Каучук',
        'Неметаллические полезные ископаемые, минералы, горные породы',
        'Прочее сырье',
        'Руда урановая и ториевая'],
    ['Автомобили легковые, Мотоциклы',
        'Спецтехника, Коммунальные машины, Автобусы',
        'Аренда спецтехники, автобусов, автомобилей, Услуги спецтехники',
        'Запчасти для легковых автомобилей, Автомобильные аксессуары',
        'Запчасти для спецтехники',
        'Аккумуляторы для автомобилей и спецтехники',
        'Шины для автомобилей и спецтехники',
        'Ремонт и обслуживание автомобильной и спецтехники',
        'Самолеты, Вертолеты и их части',
        'Железнодорожные составы, Локомотивы, Вагоны и их части',
        'Суда и их части, Судовое снабжение',
        'Космическая техника и оборудование для космических систем',
        'Ремонт и обслуживание самолетов и вертолетов',
        'Ремонт и обслуживание железнодорожных составов, локомотивов и вагонов',
        'Ремонт и обслуживание судов',
        'Оборудование и материалы для ремонта и обслуживания автомобильной и спецтехники. Гаражное оборудование'],
    ['Офисное оборудование, Расходные материалы к офисному оборудованию',
        'Вычислительное оборудование, Компьютеры, Серверы и их части',
        'Ремонт и обслуживание офисной и вычислительной техники и оборудования, Заправка картриджей',
        'Программное обеспечение. Сопровождение',
        'Программное обеспечение (юридическое, бухгалтерское, информационно-справочные системы). Сопровождение',
        'Программное обеспечение (для специализированного оборудования, производства и исследований в различных отраслях). Сопровождение',
        'Мебель, Элементы интерьера',
        'Канцелярские принадлежности',
        'Офисная бумага, бумага для полиграфии, картон, целлюлоза',
        'Бытовая техника (холодильники, телевизоры, микроволновые печи и пр.), ремонт и обслуживание',
        'Аудио-, Видео-, Фото-техника, Оборудование для презентаций и показов. Монтаж и обслуживание',
        'Контрольно-кассовое оборудование и материалы, монтаж и обслуживание'],
    ['Услуги Интернет, передачи данных, местной телефонной связи',
        'Услуги междугородней/международной телефонной связи, IP-телефонии',
        'Услуги сотовой связи',
        'Телекоммуникационное оборудование и материалы, Оборудование связи',
        'Монтаж, ремонт и обслуживание телекоммуникационного оборудования',
        'Почтовая и курьерская связь, услуги по оформлению подписки на периодические издания',
        'Оборудование и материалы для почтовой связи',
        'Создание и сопровождение Интернет-сайтов',
        'Создание баз данных и информационных ресурсов, обработка данных',
        'Услуги в области программирования',
        'Прочие услуги в области информационных технологий',
        'Услуги в области защиты информации',
        'Оборудование для защиты информации'],
    ['Проектирование, монтаж и обслуживание сигнализации, пожароохранных, контрольно-пропускных систем и оборудования',
        'Пожароохранное оборудование, сигнализация, видеонаблюдение, средства контроля доступа',
        'Охранные услуги, Инкассация',
        'Противопожарное оборудование, инвентарь и его обслуживание',
        'Противопожарная деятельность, Обучение противопожарной безопасности',
        'Сейфы',
        'Услуги и товары военно-технического назначения',
        'Оружие, Боеприпасы',
        'Запорно-пломбировочные изделия'],
    ['Банковские услуги, Кредитование, услуги Инвестиционных банков',
        'Услуги страхования',
        'Лизинг',
        'Аудиторские услуги, Бухгалтерский учет',
        'Оценочная деятельность',
        'Сертификация, аккредитация, лицензирование',
        'Консультационные услуги',
        'Юридические услуги',
        'Услуги кадровых агентств, HR, аутстаффинг'],
    ['Обувь, спецобувь, одежда, спецодежда',
        'Средства индивидуальной защиты',
        'Тара и упаковка',
        'Хозяйственные товары, Товары широкого потребления, Бытовая химия и парфюмерия',
        'Текстиль и текстильные изделия, Материалы для производства текстиля, Мягкий инвентарь, Ветошь',
        'Детские товары',
        'Услуги по пошиву'],
    ['Услуги пассажирских авиаперевозок',
        'Услуги пассажирского автомобильного транспорта',
        'Услуги пассажирского водного транспорта',
        'Услуги пассажирских ЖД перевозок',
        'Услуги грузовых автомобильных перевозок',
        'Услуги грузовых авиаперевозок',
        'Услуги грузовых ЖД перевозок',
        'Услуги грузовых водных перевозок',
        'Логистические услуги, Хранение грузов, Экспедиторские услуги',
        'Таможенные услуги',
        'Прочие услуги сопутствующие грузовым и пассажирским перевозкам',
        'Услуги трубопроводного транспорта',
        'Аренда судов для проведения технических работ',
        'Прочие услуги воздушного транспорта, Аренда воздушных судов',
        'Такелажные и стропальные работы, Демонтаж оборудования, Перевозка негабаритных грузов'],
    ['Услуги в области рекламы и маркетинга',
        'Услуги в области дизайна',
        'Оборудование и материалы для рекламы, изготовление и монтаж (кроме полиграфической продукции)',
        'Услуги теле и радиовещания, Размещение материалов в теле- и радио- эфире',
        'Размещение материалов в печатных изданиях'],
    ['Полиграфическая печатная продукция. Полиграфические услуги',
        'Книги, Журналы',
        'Сувенирная и наградная продукция',
        'Оборудование для полиграфии , монтаж и обслуживание',
        'Оборудования для бумажной промышленности, монтаж и обслуживание'],
    ['Технические газы',
        'Химические реактивы, Кислоты, Щелочи',
        'Технические соли',
        'Взрывчатые вещества',
        'Пестициды, Инсектициды, Агрохимия',
        'Прочая химическая продукция'],
    ['Услуги по утилизации и переработке промышленных и опасных медицинских отходов, загрязненных грунтов, шламов',
        'Услуги по вывозу и утилизации мусора, твердых и жидких бытовых отходов. Уборка снега',
        'Утилизация автотранспорта, в том числе эвакуация и хранение',
        'Услуги в области экологии (за исключением изысканий), Природоохрана, Лесоохрана',
        'Услуги по дератизации, дезинфекции, дезинсекции, отлову бродячих животных',
        'Услуги химчисток, прачечных',
        'Клининговые услуги'],
    ['Мясо, Мясные продукты, Продукция животноводства и охоты',
        'Рыба, Морепродукты, Продукция рыболовства',
        'Птица, Яйцо, Продукция птицеводства',
        'Продукция лесничества, Дикоросы, Мед, Орехи, Грибы',
        'Крупы, Макароны, Хлебобулочные изделия, Крупяная и макаронная продукция, Зерно, Злаки',
        'Овощи, Фрукты, в том числе консервированные, Сухофрукты',
        'Молочная продукция, Сыры, Мороженое',
        'Напитки алкогольные и безалкогольные, Вода бутилированная, Соки',
        'Чай, Кофе, Какао, Соль, Сахар, Специи, Пищевые добавки, Консервы, Бакалея',
        'Конфеты, Шоколад, Прочие кондитерские изделия',
        'Детское питание, Диетическое питание',
        'Корма для животных',
        'Цветы, Семена, Саженцы',
        'Табачная продукция',
        'Прочие продукты питания',
        'Прочая продукция сельского хозяйства, животноводства, рыболовства, охоты'],
    ['Медицинское оборудование, Медицинская техника, Медицинский инструмент',
        'Медицинские расходные материалы, Средства реабилитации, Одноразовый медицинский инструмент',
        'Фармацевтические и лекарственные средства',
        'Медицинская мебель',
        'Медицинские дезинфицирующие средства',
        'Стоматологические и ортодонтические материалы',
        'Ремонт и обслуживание медицинской техники'],
    ['Медицинские и лабораторные исследования',
        'Услуги по реабилитации, Санаторно-курортное лечение',
        'Прочие медицинские услуги',
        'Ветеринария'],
    ['Квартиры, офисы и другое недвижимое имущество, услуги по подбору, покупке и продаже Недвижимости',
        'Аренда квартир, офисов, недвижимого имущества, услуги по сдаче в наем Недвижимости',
        'Продажа и аренда земельных участков, услуги по подбору, покупке, продаже и сдаче в наем земельных участков',
        'Услуги по аренде, покупке и реализации Прочего Имущества'],
    ['Лес круглый',
        'Пиломатериалы',
        'Деревянные конструкции',
        'Изделия из дерева',
        'Пробка, Смолы, Прочая продукция лесопереработки',
        'Услуги по переработке леса'],
    ['Планирование и проведение научных исследований и разработок',
        'Услуги лабораторий (за исключением медицинских)',
        'Услуги в области образования и повышения квалификации',
        'Услуги перевода',
        'Учебное оборудование и материалы'],
    ['Оборудование, инвентарь, товары для животноводства',
        'Оборудование, инвентарь, товары для сельского хозяйства',
        'Оборудование, инвентарь, товары для рыболовства',
        'Зоотовары',
        'Работы и услуги в области сельского хозяйства',
        'Работы и услуги в области животноводства и охоты',
        'Работы и услуги в области рыболовства и рыборазведения'],
    ['Обеспечение электроэнергией',
        'Обеспечение тепловой энергией',
        'Обеспечение канализацией',
        'Обеспечение водоснабжением, подвоз воды',
        'Управление многоквартирными домами, комплексное техническое обслуживание зданий',
        'Прочие услуги ЖКХ'],
    ['Организация выставок, конференций, семинаров',
        'Организация концертов, праздников,билеты на концерты, показы фильмов и праздники',
        'Организация спортивных мероприятий, билеты на спортивные мероприятия',
        'Услуги гостиниц и ресторанов, столовых. Организация питания',
        'Туристические услуги, Организация экскурсий',
        'Услуги детских оздоровительных лагерей',
        'Фейерверки, организация фейерверков'],
    ['Спортивные и туристические товары, Тренажеры, Спортивные площадки',
        'Игровые площадки',
        'Музыкальные инструменты',
        'Произведения искусства',
        'Оборудование для развлекательного бизнеса',
        'Ювелирные украшения'],
    ['Металлические отходы и лом',
        'Неметаллические отходы и лом'],
    ['Ритуальные услуги',
        'Услуги по содержанию территорий',
        'Услуги по социальной работе с населением',
        'Общественно-бытовые услуги']
];


ymaps.ready(init);

    function init () {

    var myMap = new ymaps.Map('map', {
        center: [55.831903, 37.411961], 
        zoom: 10
    }, {
        searchControlProvider: 'yandex#map'
    });

    let loadingObjectManager = new ymaps.LoadingObjectManager('http://127.0.0.1:3000/q?bbox=%b', {   
        clusterize: true
    });

    myMap.geoObjects.add(loadingObjectManager);

    

   loadingObjectManager.objects.events.add(['add'], ObjsAddOnMap);

    function ObjsAddOnMap(e){
        let arrOfObjs=[];
        loadingObjectManager.objects.getAll().forEach(function(item, i, arr) {
            arrOfObjs.push(item.id);
        });
        document.cookie = `obj=${arrOfObjs}`;
    }
    
    typeOfTender.addEventListener('change', function(){
        let select = this.value;
        let includ=false;
        if(select == 'all'){
            loadingObjectManager.setFilter("true");
        } else{      
            loadingObjectManager.setFilter(function (object) { 
                includ=false;
                object.properties.type.forEach((item) =>{
                    
                    if(arrOfType[select].includes(item) == true){
                        console.log(object.id, item);
                        includ = true;
                    }
                });
                return includ;
            });
        }     
    });
    
}

